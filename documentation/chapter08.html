<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>BashStyle-NG 7.11 Doc / Chapter 8</title>
</head>
<body>
<h2 align="center"><font color="#00A8FF">Chapter 8: BS-NG Functions</font></h2>
<table border=0 align=center>
	<tr>
		<td><a href="chapter07.html">Chapter 7 &lt;&lt;</a></td>
		<td><a href="index.html">Index</a></td>
		<td><a href="chapter09.html">&gt;&gt; Chapter 9</a></td>
	</tr>
</table>
<hr><br>

<h3><font color="#FBA330">1 Admin functions</font></h3>
&nbsp;A set of more or less administrative functions

<h4><font color="#33C0F4">1.1 torswitch</font></h4>
&nbsp;Torswitch is a simple function for switching on or off<br>
&nbsp;the Tor Union-Router globally, when using Privoxy<br>
&nbsp;&nbsp;torswitch --on #turn on tor<br>
&nbsp;&nbsp;torswitch --off #turn of tor

<h4><font color="#33C0F4">1.2 repoadd</font></h4>
&nbsp;RepoAdd is a script for adding debian-packages to an already<br>
&nbsp;set-up apt-repo which uses reprepro to be organized<br>
&nbsp;The paths it uses are set by environment-variables<br>
&nbsp;&nbsp;REPO_HOME the root-directory of the apt-repo<br>
&nbsp;&nbsp;REPO_DIST the dist you wan to add your packaes to<br>
&nbsp;signing is done automatically

<h4><font color="#33C0F4">1.3 wipe</font></h4>
&nbsp;Wipe overwrites the given device with random numbers<br>
&nbsp;Use this on an empty partition which you want to crypt-setup later<br>
&nbsp;DON'T USE THIS ON PARTITIONS WHICH CONTAIN FILES (or are in use)!

<h4><font color="#33C0F4">1.4 remount</font></h4>
&nbsp;Simply remount a device with given options

<h4><font color="#33C0F4">1.5 xchown</font></h4>
&nbsp;XChown changes the owner of files recursively after asking for root-password

<h4><font color="#33C0F4">1.6 psgrep</font></h4>
&nbsp;Small script for grepping `ps' output but with nicer output than pgrep

<h4><font color="#33C0F4">1.7 pskill</font></h4>
&nbsp;Takes two arguements, 1st the process to psgrep for, 2nd any<br>
&nbsp;additional arguements to pass to `kill'. Will display matches<br>
&nbsp;before doing anything, not passing a process-id will simply leave

<h3><font color="#FBA330">2 Conversion functions</font></h3>
&nbsp;Various functions for conversion

<h4><font color="#33C0F4">2.1 dos2unix</font></h4>
&nbsp;d2u: for converting dos-lineendings to unix-lineendings<br>
&nbsp;u2d: for converting unix-lineendings to dos-lineendings

<h4><font color="#33C0F4">2.2 binary conversion</font></h4>
&nbsp;bin2oct: convert binary to octal number<br>
&nbsp;bin2dec: convert binary to decimal number<br>
&nbsp;bin2hex: convert binary to hexadecimal number<br>
&nbsp;bin2all: overview of all three above

<h4><font color="#33C0F4">2.3 octal conversion</font></h4>
&nbsp;oct2bin: convert octal to binary number<br>
&nbsp;oct2dec: convert octal to decimal number<br>
&nbsp;oct2hex: convert octal to hexadecimal number<br>
&nbsp;oct2all: overview of all three above

<h4><font color="#33C0F4">2.4 decimal conversion</font></h4>
&nbsp;dec2oct: convert decimal to octal number<br>
&nbsp;dec2bin: convert decimal to binary number<br>
&nbsp;dec2hex: convert decimal to hexadecimal number<br>
&nbsp;dec2all: overview of all three above

<h4><font color="#33C0F4">2.5 hexadecimal conversion</font></h4>
&nbsp;hex2oct: convert hexadecimal to octal number<br>
&nbsp;hex2dec: convert hexadecimal to decimal number<br>
&nbsp;hex2bin: convert hexadecimal to binary number<br>
&nbsp;hex2all: overview of all three above

<h4><font color="#33C0F4">2.6 algebra functions</font></h4>
&nbsp;round: round a number (use `,' as delimiter), 2nd arguement<br>
&nbsp;is the number of decimal places to keep<br>
&nbsp;radical: calculate the square-root of a number<br>
&nbsp;power: calculate the nth power (2nd arguement) of a number (1st arguement)

<h3><font color="#FBA330">3 Dirinfo functions</font></h3>
&nbsp;Dirinfo is some kind of cataloging directories, I've though I must have<br>
&nbsp;it's currently a working prototype neither technically nor functionally finished

<h4><font color="#33C0F4">3.1 Dirinfo-Spec (Draft 1 Revision 2)</font></h4>
&nbsp;Example of a .dirinfo file:<br><br>

&nbsp;Owner="Name Surname" # quotes are important!<br>
&nbsp;Created=YYYY-MM-DD # this format is recommended<br>
&nbsp;Type=type # supported types: book, document, download, game, home, mediaplayer, music, picture, share, video*<br>
&nbsp;Tags=(tag1 tag2 tag3) # this format! anything is allowed<br>
&nbsp;Notes="put your notes here" # quotes are important!<br><br>

&nbsp;file-name is always .dirinfo in the desired directory<br><br>
&nbsp;* if you want to have a different type, create a .dirascii<br>

&nbsp;file for it. check $BSNG_RC_DIR/ascii/ for examples

<h4><font color="#33C0F4">3.2 LSCD </font></h4>
&nbsp;lscd is an enhanced version of the built-in cd. It supports<br>
&nbsp;dirinfo, saving the last directory visited (so that one ends<br>
&nbsp;up in the same directory again, when starting a new shell),<br>
&nbsp;aswell as auto-displaying the content of the directory<br><br>

&nbsp;Example output of lscd with a .dirinfo file (Type=home):<br>
<img src="./img/dirinfo-example.png">

<h4><font color="#33C0F4">3.3 dirinfo_get_creation_date </font></h4>
&nbsp;... Normally this function would get the creation-date of a file ...<br>
&nbsp;hah! linux-filesystems don't store it, therefore we fool ourselves<br>
&nbsp;and get the time of the last modification instead

<h4><font color="#33C0F4">3.4 dirinfo_set_creation_date </font></h4>
&nbsp;... inserts the date gotten from _get_creation_date into the .dirinfo file

<h4><font color="#33C0F4">3.5 dirinfo_get_dirinfo </font></h4>
&nbsp;Internal function for getting values off a .dirinfo file (lscd)

<h4><font color="#33C0F4">3.6 dirinfo_display_info </font></h4>
&nbsp;If the info gotten from _get_dirinfo does not contain a Type field,<br>
&nbsp;this function is to display the infos (lscd)

<h4><font color="#33C0F4">3.7 dirinfo_display_ascii </font></h4>
&nbsp;On the other hand, if there's a Type field, display the corresponding<br>
&nbsp;ascii-art (as shown above) and the infos. If there's no BS-NG shipped<br>
&nbsp;ascii-art that matches, check for .dirascii file to display, if that<br>
&nbsp;also fails, call dirinfo_display_info instead (lscd)

<h4><font color="#33C0F4">3.8 dirinfo_index_db </font></h4>
&nbsp;Search $HOME for all .dirinfo files and create an index<br>
&nbsp;use dirinfo_index --update instead (described later)

<h4><font color="#33C0F4">3.8.1 dirinfo_index_tags </font></h4>
&nbsp;Create a tag-index for all  .dirinfo files listed in the index<br>
&nbsp;user dirinfo_index --rebuild instead (described later)

<h4><font color="#33C0F4">3.8.2 dirinfo_index_types </font></h4>
&nbsp;Create a type-index for all .dirinfo files listed in the index<br>
&nbsp;user dirinfo_index --rebuild instead (described later)

<h4><font color="#33C0F4">3.8.3 dirinfo_index_dates </font></h4>
&nbsp;Create a date-index for all .dirinfo files listed in the index<br>
&nbsp;user dirinfo_index --rebuild instead (described later)

<h4><font color="#33C0F4">3.9 dirinfo_index </font></h4>
&nbsp;Function for updating, rebuilding and searching the index<br>
&nbsp;dirinfo_index --update (call functions 3.8 - 3.8.3)<br>
&nbsp;dirinfo_index --rebuild (call functions 3.8.1 - 3.8.3)<br>
&nbsp;dirinfo_index --list (list all indexed directories)<br>
&nbsp;dirinfo_index --search SEARCH_TYPE (search through the index,<br>
&nbsp;SEARCH_TYPE is one of --tag, --type or --date)

<h4><font color="#33C0F4">3.10 dirinfo_create </font></h4>
&nbsp;Ugly query to create a .dirinfo file without the need to remember the syntax

<h3><font color="#FBA330">4 Info functions</font></h3>

<h4><font color="#33C0F4">4.1 count_files</font></h4>
&nbsp;Function for counting files in the current directory, see --help

<h4><font color="#33C0F4">4.2 count_processes</font></h4>
&nbsp;Function for counting processes

<h4><font color="#33C0F4">4.3 show_battery_load</font></h4>
&nbsp;Function for displaying the battery load, via --acpi or --apm

<h4><font color="#33C0F4">4.4 show_cpu_load</font></h4>
&nbsp;Function for displaying the CPU-Load

<h4><font color="#33C0F4">4.5 show_ip</font></h4>
&nbsp;Function for displaying the ip-address of a given interface, see --help

<h4><font color="#33C0F4">4.6 show_mem</font></h4>
&nbsp;Function for displaying the current free/used ram in mb/percent, see --help

<h4><font color="#33C0F4">4.7 show_size</font></h4>
&nbps;Function for displaying the size of all files in the current directory

<h4><font color="#33C0F4">4.8 show_space</font></h4>
&nbsp;Function for displaying the free space of a given device, see --help

<h4><font color="#33C0F4">4.9 show_system_load</font></h4>
&nbsp;Function for displaying the system-load, see --help

<h4><font color="#33C0F4">4.10 show_tty</font></h4>
&nbsp;Function for displaying the current TTY (in a stylish manner)

<h4><font color="#33C0F4">4.11 show_uptime</font></h4>
&nbsp;Function for displaying the machine's uptime

<h4><font color="#33C0F4">4.12 system_infos</font></h4>
&nbsp;Function for getting various system informations, see --help

<h3><font color="#FBA330">10 Internal functions/variables</font></h3>

<h4><font color="#33C0F4">10.1 BSNG_PREFIX</font></h4>
&nbsp;Environment-variable containing the installation-prefix of BS-NG

<h4><font color="#33C0F4">10.2 BSNG_RC_DIR</font></h4>
&nbsp;Environment-variable containing the path to the functions directory

<h4><font color="#33C0F4">10.3 BSNG_LOCKFILE</font></h4>
&nbsp;Environment-variable containing the path to the loCKfile

<h4><font color="#33C0F4">10.4 BSNG_VERSION</font></h4>
&nbsp;Environment-variable containing the version of BS-NG

<h4><font color="#33C0F4">10.5 BSNG_LOGFILE</font></h4>
&nbsp;Environment-variable containing the path to the loGfile

<h4><font color="#33C0F4">10.6 BSNG_DOCS</font></h4>
&nbsp;Environment-variable containing the path to the documentation

<h4><font color="#33C0F4">10.7 dbg_msg</font></h4>
&nbsp;Displays the debug messages on startup and stores them

<h4><font color="#33C0F4">10.8 check_opt</font></h4>
&nbsp;Check optional dependencies for scripts, on run-time

<h4><font color="#33C0F4">10.9 BSNG_GCONF_READ</font></h4>
&nbsp;Environment-variable used by get_key/set_key with this<br>
&nbsp;set you can pass eg: alias/one to them rather than<br>
&nbsp;/apps/bashstyle/alias/one (used by nx-rc for better readability)

<h4><font color="#33C0F4">10.10 get_key</font></h4>
&nbsp;Get the value of a GConf-Key (listens to BSNG_GCONF_READ)

<h4><font color="#33C0F4">10.11 set_key</font></h4>
&nbsp;Set the value of a GConf-Key (listens to BSNG_GCONF_READ)

<h4><font color="#33C0F4">10.12 reset_key</font></h4>
&nbsp;Reset the value of a GConf-Key (listens to BSNG_GCONF_READ)

<h4><font color="#33C0F4">10.13 reset_config</font></h4>
&nbsp;Reset the BS-NG settings to defaults

<h4><font color="#33C0F4">10.14 search_key</font></h4>
&nbsp;Search for a GConf-Key

</body>
</html>
